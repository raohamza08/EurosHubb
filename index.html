<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>EurosHub - Time Tracking Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="https://raw.githubusercontent.com/raohamza08/EurosHub/main/EurosHub.png" type="image/png" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&family=Playfair+Display:wght@500;600;700&display=swap" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <style>
    :root {
      --primary: #063A53;
      --primary-light: #0a5278;
      --secondary: #00BFA6;
      --secondary-dark: #009688;
      --accent: #FFB200;
      --light: #F8F9FA;
      --dark: #1C1C1C;
      --text-color: #212529;
      --input-bg: #ffffff;
      --border-color: #ced4da;
      --shadow-sm: 0 1px 3px rgba(0,0,0,0.12);
      --shadow-md: 0 4px 6px rgba(0,0,0,0.1);
      --shadow-lg: 0 10px 25px rgba(0,0,0,0.1);
      --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
      --success-bg: rgba(0, 191, 166, 0.1);
    }
    
    [data-theme="dark"] {
      --primary: #00BFA6;
      --primary-light: #00d9bd;
      --secondary: #063A53;
      --secondary-dark: #05283d;
      --text-color: #f8f9fa;
      --input-bg: #343a40;
      --border-color: #495057;
      --light: #212529;
      --shadow-sm: 0 1px 3px rgba(0,0,0,0.3);
      --shadow-md: 0 4px 6px rgba(0,0,0,0.25);
      --shadow-lg: 0 10px 25px rgba(0,0,0,0.25);
      --success-bg: rgba(6, 58, 83, 0.2);
    }
    
    body {
      font-family: 'Poppins', sans-serif;
      background: var(--light);
      color: var(--text-color);
      margin: 0;
      padding: 20px;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
    }
    
    .glass-container {
      max-width: 720px;
      width: 100%;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      border-radius: 24px;
      box-shadow: var(--shadow-lg);
      padding: 40px;
      margin: 20px;
      transition: var(--transition);
    }
    
    [data-theme="dark"] .glass-container {
      background: rgba(33, 37, 41, 0.9);
    }
    
    .logo-header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      margin-bottom: 30px;
    }
    
    .logo {
      height: 55px;
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
    }
    
    .brand-name {
      font-family: 'Playfair Display', serif;
      font-size: 28px;
      color: var(--primary);
      font-weight: 700;
      letter-spacing: 0.5px;
    }
    
    .form-title {
      text-align: center;
      font-family: 'Playfair Display', serif;
      color: var(--primary);
      margin-bottom: 25px;
      font-size: 26px;
      font-weight: 600;
    }
    
    .form-group {
      margin-bottom: 25px;
      position: relative;
    }
    
    label {
      display: block;
      font-weight: 500;
      margin-bottom: 8px;
      color: var(--primary);
      font-size: 14px;
      transition: var(--transition);
    }
    
    select, input[type="text"], input[type="date"], input[type="time"], input[type="number"], textarea {
      width: 100%;
      padding: 14px 16px;
      border: 1px solid var(--border-color);
      border-radius: 12px;
      background: var(--input-bg);
      color: var(--text-color);
      font-family: inherit;
      font-size: 15px;
      box-shadow: var(--shadow-sm);
      transition: var(--transition);
      height: 50px;
      box-sizing: border-box;
    }
    
    textarea {
      height: 120px;
      resize: vertical;
    }
    
    select:focus, input:focus, textarea:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(0, 191, 166, 0.2);
    }
    
    /* Custom select styling */
    select {
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      background-repeat: no-repeat;
      background-position: right 15px center;
      padding-right: 40px;
      cursor: pointer;
    }
    
    /* Option styling */
    option {
      background: var(--input-bg);
      color: var(--text-color);
      padding: 10px;
    }
    
    option:checked {
      background: var(--primary);
      color: white;
    }
    
    option:hover {
      background: var(--primary-light);
      color: white;
    }
    
    .time-group {
      display: flex;
      gap: 15px;
    }
    
    .time-group > div {
      flex: 1;
    }
    
    .hours-display {
      font-weight: 600;
      color: var(--primary);
      margin-top: 8px;
      font-size: 15px;
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    .hours-display i {
      color: var(--secondary);
    }
    .btn {
      padding: 13px 20px;
      background: var(--secondary);
      border: none;
      color: white;
      font-weight: 600;
      width: 100%;
      border-radius: 10px;
      cursor: pointer;
      font-size: 15px;
      box-shadow: var(--shadow-md);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      height: 48px;
      transition: var(--transition);
    }
   
    .btn:hover {
      background: var(--primary-light);
      transform: translateY(-2px);
      box-shadow: 0 7px 14px rgba(6, 58, 83, 0.2);
    }
    
    .btn:active {
      transform: translateY(0);
    }
    
    .btn-secondary {
      background: var(--secondary);
    }
    
    .btn-secondary:hover {
      background: var(--secondary-dark);
      box-shadow: 0 7px 14px rgba(0, 191, 166, 0.2);
    }
    
    .hidden { 
      display: none;
      opacity: 0;
      transition: var(--transition);
    }
    
    .other-project-input {
      margin-top: 10px;
      animation: fadeIn 0.3s ease-out;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-5px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .thank-you {
      text-align: center;
      padding: 40px;
      background: var(--success-bg);
      border-radius: 16px;
      margin-top: 30px;
      animation: fadeIn 0.5s ease-out;
      border: 1px solid rgba(0, 191, 166, 0.3);
    }
    
    .thank-you h3 {
      font-family: 'Playfair Display', serif;
      color: var(--primary);
      margin-bottom: 15px;
      font-size: 24px;
    }
    
    .thank-you p {
      margin-bottom: 25px;
      font-size: 16px;
    }
    
    .theme-toggle {
      position: fixed;
      bottom: 25px;
      right: 25px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 18px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: var(--shadow-md);
      transition: var(--transition);
      z-index: 100;
    }
    
    .theme-toggle:hover {
      transform: scale(1.1);
    }
    
    .input-icon {
      position: absolute;
      right: 15px;
      top: 38px;
      color: var(--secondary);
      pointer-events: none;
    }
    
    /* Loading spinner */
    .fa-spinner {
      animation: spin 0.5s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* Selection cards */
    .selection-cards {
      display: grid;
      grid-template-columns: 1fr;
      gap: 20px;
      margin-top: 30px;
    }
    
    .selection-card {
      background: white;
      border-radius: 16px;
      padding: 30px;
      box-shadow: var(--shadow-md);
      transition: var(--transition);
      cursor: pointer;
      border: 2px solid transparent;
      text-align: center;
    }
    
    [data-theme="dark"] .selection-card {
      background: var(--input-bg);
    }
    
    .selection-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-lg);
      border-color: var(--primary);
    }
    
    .selection-card i {
      font-size: 36px;
      color: var(--primary);
      margin-bottom: 15px;
    }
    
    .selection-card h3 {
      font-family: 'Playfair Display', serif;
      color: var(--primary);
      margin-bottom: 10px;
    }
    
    .selection-card p {
      color: var(--text-color);
      font-size: 14px;
      margin-bottom: 15px;
    }
    
    .back-btn {
      margin-bottom: 25px;
      background: none;
      border: none;
      color: var(--primary);
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: var(--transition);
    }
    
    .back-btn:hover {
      color: var(--primary-light);
    }
    
    @media (max-width: 768px) {
      .glass-container {
        padding: 30px 20px;
        margin: 15px;
      }
      
      .time-group {
        flex-direction: column;
        gap: 15px;
      }
      
      .form-title {
        font-size: 22px;
      }
      
      body {
        padding: 10px;
        align-items: flex-start;
      }
      
      .selection-cards {
        grid-template-columns: 1fr;
      }
    }
    
    @media (min-width: 769px) {
      .selection-cards {
        grid-template-columns: 1fr 1fr;
      }
    }
  </style>
</head>
<body>
  <!-- Main Selection Page -->
  <div class="glass-container" id="selectionPage">
    <div class="logo-header">
      <img src="https://raw.githubusercontent.com/raohamza08/EurosHub/main/EurosHub.png" class="logo" alt="EurosHub Logo" />
      <div class="brand-name">EurosHub</div>
    </div>

    <h2 class="form-title"><i class="fas fa-clock" style="margin-right: 10px;"></i>Time Tracking Portal</h2>
    
    <p style="text-align: center; margin-bottom: 30px;">Select the type of time entry you'd like to record:</p>
    
    <div class="selection-cards">
      <div class="selection-card" onclick="showForm('projectForm')">
        <i class="fas fa-tasks"></i>
        <h3>Project Time Tracking</h3>
        <p>Add Tracking Time.</p>
        <button class="btn btn-secondary">
          Add Time
        </button>
      </div>
      
      <div class="selection-card" onclick="showForm('overtimeForm')">
        <i class="fas fa-business-time"></i>
        <h3>Overtime Request</h3>
        <p>Submit Overtime</p>
        <button class="btn btn-secondary">
          Request Overtime
        </button>
      </div>
    </div>
  </div>

  <!-- Project Time Tracking Form -->
  <div class="glass-container hidden" id="projectForm">
    <button class="back-btn" onclick="goBack()">
      <i class="fas fa-arrow-left"></i> Back to Portal
    </button>
    
    <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>EurosHub - Report Intake</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="https://raw.githubusercontent.com/raohamza08/EurosHub/main/EurosHub.png" type="image/png" />
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&family=Playfair+Display:wght@500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #063A53;
      --secondary: #00BFA6;
      --accent: #FFB200;
      --light: #F8F9FA;
      --dark: #1C1C1C;
      --text-color: #212529;
      --input-bg: #ffffff;
      --border-color: #ced4da;
      --shadow-sm: 0 1px 3px rgba(0,0,0,0.12);
      --shadow-md: 0 4px 6px rgba(0,0,0,0.1);
      --shadow-lg: 0 10px 25px rgba(0,0,0,0.1);
      --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
      --readonly-bg: rgba(255, 76, 41, 0.1);
      --readonly-border: rgba(255, 76, 41, 0.3);
    }
    
    [data-theme="dark"] {
      --primary: #00BFA6;
      --text-color: #f8f9fa;
      --input-bg: #343a40;
      --border-color: #495057;
      --light: #212529;
      --shadow-sm: 0 1px 3px rgba(0,0,0,0.3);
      --shadow-md: 0 4px 6px rgba(0,0,0,0.25);
      --shadow-lg: 0 10px 25px rgba(0,0,0,0.25);
      --readonly-bg: rgba(13, 110, 253, 0.2);
      --readonly-border: #0d6efd66;
    }
    
    body {
      font-family: 'Poppins', sans-serif;
      background: var(--light);
      color: var(--text-color);
      margin: 0;
      padding: 20px;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
    }
    
    .glass-container {
      max-width: 720px;
      width: 100%;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      border-radius: 24px;
      box-shadow: var(--shadow-lg);
      padding: 30px;
      margin: 20px;
      transition: var(--transition);
    }
    
    [data-theme="dark"] .glass-container {
      background: rgba(33, 37, 41, 0.9);
    }
    
    .logo-header {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 15px;
      margin-bottom: 20px;
    }
    
    .logo {
      height: 50px;
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.1));
    }
    
    .brand-name {
      font-family: 'Playfair Display', serif;
      font-size: 26px;
      color: var(--primary);
      font-weight: 700;
      letter-spacing: 0.5px;
    }
    
    .form-title {
      text-align: center;
      font-family: 'Playfair Display', serif;
      color: var(--primary);
      margin-bottom: 8px;
      font-size: 24px;
      font-weight: 600;
    }
    
    .form-subtitle {
      text-align: center;
      font-size: 14px;
      color: var(--text-color);
      opacity: 0.8;
      margin-bottom: 20px;
    }
    
    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
    }
    
    .form-group {
      margin-bottom: 15px;
      position: relative;
    }
    
    .full-width {
      grid-column: span 2;
    }
    
    label {
      display: block;
      font-weight: 500;
      margin-bottom: 6px;
      color: var(--primary);
      font-size: 14px;
    }
    
    label i {
      margin-right: 6px;
      color: var(--secondary);
    }
    
    select, input[type="text"], input[type="date"], textarea {
      width: 100%;
      padding: 12px 14px;
      border: 1px solid var(--border-color);
      border-radius: 10px;
      background: var(--input-bg);
      color: var(--text-color);
      font-family: inherit;
      font-size: 14px;
      box-shadow: var(--shadow-sm);
      height: 46px;
      box-sizing: border-box;
    }
    
    textarea {
      height: 90px;
      resize: vertical;
      min-height: 90px;
    }
    
    select:focus, input:focus, textarea:focus {
      outline: none;
      border-color: var(--secondary);
      box-shadow: 0 0 0 3px rgba(0, 191, 166, 0.2);
    }
    
    .readonly-label {
      padding: 12px 14px;
      background-color: var(--readonly-bg);
      border: 1px solid var(--readonly-border);
      border-radius: 10px;
      font-size: 14px;
      color: var(--primary);
      min-height: 46px;
      display: flex;
      align-items: center;
    }

    
    
    .btn:hover {
      background: #009688;
      transform: translateY(-2px);
      box-shadow: 0 7px 14px rgba(0, 191, 166, 0.2);
    }
    
    .btn-secondary {
      background: var(--input-bg);
      color: var(--primary);
      border: 1px solid var(--primary);
    }
    
    .btn-secondary:hover {
      background: var(--primary);
      color: white;
    }
    
    .hidden { 
      display: none;
    }
    
    .thank-you {
      text-align: center;
      padding: 30px;
      background: rgba(0, 191, 166, 0.1);
      border-radius: 14px;
      margin-top: 20px;
    }
    
    .thank-you h3 {
      font-family: 'Playfair Display', serif;
      color: var(--primary);
      margin-bottom: 12px;
      font-size: 22px;
    }
    
    .thank-you p {
      margin-bottom: 20px;
      font-size: 15px;
    }
    
    .theme-toggle {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--primary);
      color: white;
      border: none;
      border-radius: 50%;
      width: 46px;
      height: 46px;
      font-size: 17px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: var(--shadow-md);
      z-index: 100;
    }
    
    .input-icon {
      position: absolute;
      right: 14px;
      top: 36px;
      color: var(--secondary);
      pointer-events: none;
    }
    
    select {
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      padding-right: 36px;
    }
    
    /* Radio Button Styles */
    .radio-group {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-bottom: 15px;
      padding: 15px;
      background: var(--input-bg);
      border-radius: 10px;
      border: 1px solid var(--border-color);
    }
    
    .radio-option {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
    }
    
    .radio-option input[type="radio"] {
      appearance: none;
      width: 18px;
      height: 18px;
      border: 2px solid var(--border-color);
      border-radius: 50%;
      outline: none;
      cursor: pointer;
      transition: var(--transition);
      position: relative;
    }
    
    .radio-option input[type="radio"]:checked {
      border-color: var(--secondary);
    }
    
    .radio-option input[type="radio"]:checked::before {
      content: '';
      position: absolute;
      top: 2px;
      left: 2px;
      width: 10px;
      height: 10px;
      background: var(--secondary);
      border-radius: 50%;
    }
    
    .radio-option label {
      margin: 0;
      cursor: pointer;
      color: var(--text-color);
    }
    
    /* Select2 Overrides */
    .select2-container .select2-selection {
      height: 46px !important;
      border-radius: 10px !important;
      border: 1px solid var(--border-color) !important;
      padding: 6px 12px !important;
      background: var(--input-bg) !important;
      color: var(--text-color) !important;
    }
    
    .select2-container--default .select2-selection--single .select2-selection__rendered {
      line-height: 32px !important;
      color: var(--text-color) !important;
    }
    
    .select2-container--default .select2-selection--single .select2-selection__placeholder {
      color: var(--text-color) !important;
      opacity: 0.7;
    }
    
    .select2-container--default .select2-selection--single .select2-selection__arrow {
      height: 44px !important;
    }
    
    .select2-container--default .select2-dropdown {
      background-color: var(--input-bg);
      color: var(--text-color);
      border: 1px solid var(--border-color);
    }
    
    .select2-container--default .select2-results__option {
      background-color: var(--input-bg);
      color: var(--text-color);
    }
    
    .select2-container--default .select2-results__option--highlighted {
      background-color: var(--secondary) !important;
      color: white !important;
    }
    
    .invalid { border: 2px solid #ff4444 !important; }
    .valid { border: 2px solid #00C851 !important; }
    
    @media (max-width: 768px) {
      .glass-container {
        padding: 25px 18px;
        margin: 15px;
      }
      
      .form-grid {
        grid-template-columns: 1fr;
        gap: 12px;
      }
      
      .full-width {
        grid-column: span 1;
      }
      
      .radio-group {
        flex-direction: column;
        gap: 12px;
      }
      
      .form-title {
        font-size: 22px;
        margin-bottom: 18px;
      }
      
      body {
        padding: 15px;
      }
    }
  </style>
</head>
<body>
 
    <div class="logo-header">
      <img src="https://raw.githubusercontent.com/raohamza08/EurosHub/main/EurosHub.png" class="logo" alt="EurosHub Logo" />
      <div class="brand-name">EurosHub</div>
    </div>

    <h2 class="form-title"><i class="fas fa-clock"></i>Report Intake Form</h2>
    <p class="form-subtitle">Please fill in the details below to record your time</p>
    
    <div id="formArea">
      <!-- Radio Button Group -->
      <div class="radio-group full-width">
        <div class="radio-option">
          <input type="radio" id="hourlyTracked" name="timeType" value="Hourly Tracked" checked>
          <label for="hourlyTracked">Hourly Tracked</label>
        </div>
        <div class="radio-option">
          <input type="radio" id="manualTime" name="timeType" value="Manual Time">
          <label for="manualTime">Manual Time</label>
        </div>
        <div class="radio-option">
          <input type="radio" id="testTask" name="timeType" value="Test Task">
          <label for="testTask">Test Task</label>
        </div>
        <div class="radio-option">
          <input type="radio" id="fixedProject" name="timeType" value="Fixed Project">
          <label for="fixedProject">Fixed Project</label>
        </div>
      </div>

      <div class="form-grid">
        <div class="form-group">
          <label for="profileName"><i class="fas fa-user"></i>Profile Name *</label>
          <select id="profileName"><option value="" disabled selected>Select Profile</option></select>
          <i class="fas fa-chevron-down input-icon"></i>
        </div>
        <div class="form-group">
          <label for="projectName"><i class="fas fa-project-diagram"></i>Project Name *</label>
          <select id="projectName"><option value="" disabled selected>Select Project</option></select>
          <i class="fas fa-chevron-down input-icon"></i>
        </div>
        <div class="form-group">
          <label for="teamMember"><i class="fas fa-users"></i>Team Member *</label>
          <select id="teamMember"><option value="" disabled selected>Select Team Member</option></select>
          <i class="fas fa-chevron-down input-icon"></i>
        </div>
        <div class="form-group">
          <label for="trackingDate"><i class="far fa-calendar-alt"></i>Tracking Date *</label>
          <input type="date" id="trackingDate">
        </div>
        <div class="form-group">
          <label for="startTime"><i class="far fa-clock"></i>Start Time *</label>
          <select id="startTime"><option value="" disabled selected>Select Start Time</option></select>
          <i class="fas fa-chevron-down input-icon"></i>
        </div>
        <div class="form-group">
          <label for="endTime"><i class="far fa-clock"></i>End Time *</label>
          <select id="endTime"><option value="" disabled selected>Select End Time</option></select>
          <i class="fas fa-chevron-down input-icon"></i>
        </div>



         <div class="form-group">
          <i class="fas fa-calculator"></i> Total Time: <span id="totalTimeLabel">0:00</span>
        </div>
        <input type="hidden" name="totalTimeLabel" id="totalTimeLabel">
      </div>



        <div class="form-group full-width">
          <label for="memo"><i class="far fa-sticky-note"></i>Memo</label>
          <textarea id="memo" placeholder="Add any notes about this time entry..."></textarea>
        </div>
      </div>
      
      <div class="form-grid">
        <div class="form-group full-width">
          <button type="button" id="submitBtn" class="btn">
            <i class="fas fa-paper-plane"></i> Submit Time Entry
          </button>
        </div>
        <div class="form-group full-width">
          <button type="button" id="resetBtn" class="btn btn-secondary">
            <i class="fas fa-redo"></i> Reset Form
          </button>
        </div>
      </div>
    </div>

    <div class="thank-you hidden" id="thankYouMessage">
      <h3><i class="fas fa-check-circle" style="color: var(--secondary); margin-right: 8px;"></i> Thank You!</h3>
      <p>Your time entry has been successfully recorded.</p>
      <button class="btn" onclick="location.reload()">
        <i class="fas fa-plus"></i> Submit Another Response
      </button>
    </div>
  </div>

  <button class="theme-toggle" id="themeToggle"><i class="fas fa-moon"></i></button>

  <script>
    $(document).ready(function () {
      // Theme toggle functionality
      $('#themeToggle').click(function () {
        const current = document.documentElement.getAttribute('data-theme');
        if (current === 'dark') {
          document.documentElement.removeAttribute('data-theme');
          $(this).html('<i class="fas fa-moon"></i>');
          localStorage.setItem('theme', 'light');
        } else {
          document.documentElement.setAttribute('data-theme', 'dark');
          $(this).html('<i class="fas fa-sun"></i>');
          localStorage.setItem('theme', 'dark');
        }
        
        // Reinitialize Select2 after theme change
        setTimeout(() => {
          $('#profileName, #teamMember, #projectName, #startTime, #endTime').select2();
        }, 50);
      });

      // Check for saved theme preference
      if (localStorage.getItem('theme') === 'dark') {
        document.documentElement.setAttribute('data-theme', 'dark');
        $('#themeToggle').html('<i class="fas fa-sun"></i>');
      }

      // Rest of your existing functionality
      const DATA_API_URL = "https://script.google.com/macros/s/AKfycbzz-62UOauzAlY793hSLcGKkNBGFx_ruNiSULBjxe7i9a_q1TIhMozPM9CQB87-g5lK/exec";
      const SUBMIT_API_URL = "https://script.google.com/macros/s/AKfycbzz-62UOauzAlY793hSLcGKkNBGFx_ruNiSULBjxe7i9a_q1TIhMozPM9CQB87-g5lK/exec";
      
      let isSubmitting = false;

      function populateDropdowns() {
        $.get(DATA_API_URL, function (response) {
          const data = typeof response === 'string' ? JSON.parse(response) : response;

          $('#profileName').empty().append(new Option("Select Profile", "", true, true));
          data.profileNames.forEach(name => $('#profileName').append(new Option(name, name)));

          $('#teamMember').empty().append(new Option("Select Team Member", "", true, true));
          data.teamMembers.forEach(name => $('#teamMember').append(new Option(name, name)));

          $('#projectName').empty().append(new Option("Select Project", "", true, true));
          data.projectNames.forEach(name => $('#projectName').append(new Option(name, name)));

          $('#profileName, #teamMember, #projectName, #startTime, #endTime').select2();
        });
      }

      populateDropdowns();

      const startSelect = $('#startTime');
      const endSelect = $('#endTime');
      const totalTimeLabel = $('#totalTimeLabel');

      const generateTimeSlots = () => {
        const slots = [];
        const current = new Date();
        current.setHours(0, 0, 0, 0);
        for (let i = 0; i < 143; i++) {
          slots.push(formatTime(current));
          current.setMinutes(current.getMinutes() + 10);
        }
        slots.push("11:59:59 PM");
        return slots;
      };

      const formatTime = (date) => {
        let hours = date.getHours();
        let minutes = date.getMinutes();
        const ampm = hours >= 12 ? "PM" : "AM";
        hours = hours % 12 || 12;
        return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')} ${ampm}`;
      };

      const timeSlots = generateTimeSlots();
      timeSlots.forEach(t => startSelect.append(new Option(t, t)));

      startSelect.on('change', function () {
        const selectedIndex = timeSlots.indexOf($(this).val());
        endSelect.empty().append(new Option("Select End Time", "", true, true));
        for (let i = selectedIndex + 1; i < timeSlots.length; i++) {
          endSelect.append(new Option(timeSlots[i], timeSlots[i]));
        }
        totalTimeLabel.text('0:00');
      });

      endSelect.on('change', function () {
        const start = startSelect.val();
        const end = endSelect.val();
        if (!start || !end) return totalTimeLabel.text('--');
        totalTimeLabel.text(calculateTimeDiff(start, end));
      });

      const calculateTimeDiff = (start, end) => {
        const parse = t => {
          const [hm, ampm] = t.trim().split(' ');
          let [h, m] = hm.split(':').map(Number);
          if (ampm === 'PM' && h !== 12) h += 12;
          if (ampm === 'AM' && h === 12) h = 0;
          return h * 60 + m;
        };

        let diffMinutes = parse(end) - parse(start);
        if (diffMinutes < 0) diffMinutes += 24 * 60; // handle next-day

        const hours = Math.floor(diffMinutes / 60);
        const minutes = diffMinutes % 60;

        return `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:00`;
      };

      $('#submitBtn').click(function () {
        if (isSubmitting) return;
        
        let valid = true;
        $('#profileName, #projectName, #trackingDate, #startTime, #endTime, #teamMember').each(function () {
          const $this = $(this);
          if (!$this.val()) {
            $this.next('.select2-container').length
              ? $this.next('.select2-container').find('.select2-selection').addClass('invalid')
              : $this.addClass('invalid');
            valid = false;
          } else {
            $this.next('.select2-container').length
              ? $this.next('.select2-container').find('.select2-selection').removeClass('invalid').addClass('valid')
              : $this.removeClass('invalid').addClass('valid');
          }
        });

        if (!valid) return;

        isSubmitting = false;
        $('#formArea').hide();
        $('#projectForm').hide();
        $('#thankYouMessage').removeClass('hidden');
        $('#submitBtn').prop('disabled', true)
        submitBtn.html('<i class="fas fa-spinner fa-spin"></i> Submitting...');


        const payload = {
          profileName: $('#profileName').val(),
          projectName: $('#projectName').val(),
          memo: $('#memo').val(),
          trackingDate: $('#trackingDate').val(),
          startTime: $('#startTime').val(),
          endTime: $('#endTime').val(),
          totalTime: $('#totalTimeLabel').text(),
          teamMember: $('#teamMember').val(),
          timeType: $('input[name="timeType"]:checked').val()
        };
        
        $.ajax({
          url: SUBMIT_API_URL + "?" + new URLSearchParams(payload).toString(),
          method: "GET",
          success: function () {
            // Success - already showing thank you message
          },
          error: function (err) {
            console.error("Submission error:", err);
            $('#thankYouMessage p').text('Your submission was recorded, but there was a minor issue processing it.');
          },
          complete: function() {
            isSubmitting = false;
          }
        });
      });

      $('#resetBtn').click(function () {
        resetForm();
      });
      
      function resetForm() {
        $('input, textarea').val('').removeClass('invalid valid');
        $('select').val('').trigger('change').removeClass('invalid valid');
        $('.select2-selection').removeClass('invalid valid');
        $('#formArea').show();
        $('#thankYouMessage').addClass('hidden');
        $('#totalTimeLabel').text('--');
        $('#endTime').empty().append(new Option("Select End Time", "", true, true));
        $('#submitBtn').prop('disabled', false).html('<i class="fas fa-paper-plane"></i> Submit Time Entry');
        $('input[name="timeType"][value="Hourly Tracked"]').prop('checked', true);
        isSubmitting = false;
      }
    });
  </script>
</body>
</html>

  <!-- Overtime Form -->
  <div class="glass-container hidden" id="overtimeForm">
    <button class="back-btn" onclick="goBack()">
      <i class="fas fa-arrow-left"></i> Back to Portal
    </button>
    
    <div class="logo-header">
      <img src="https://raw.githubusercontent.com/raohamza08/EurosHub/main/EurosHub.png" class="logo" alt="EurosHub Logo" />
      <div class="brand-name">EurosHub</div>
    </div>

    <h2 class="form-title"><i class="fas fa-business-time" style="margin-right: 10px;"></i>Overtime Request</h2>
    
    <form id="overtimeFormFields">
      <input type="hidden" name="formType" value="overtime" />

      <div class="form-group">
        <label for="employee"><i class="fas fa-user" style="margin-right: 8px;"></i>Employee Name</label>
        <select id="employee" name="employee" required>
          <option value="" disabled selected>Select employee</option>
        </select>
        <i class="fas fa-chevron-down input-icon"></i>
      </div>

      <div class="form-group">
        <label for="project"><i class="fas fa-project-diagram" style="margin-right: 8px;"></i>Project</label>
        <select id="project" name="project" required>
          <option value="" disabled selected>Select project</option>
        </select>
        <i class="fas fa-chevron-down input-icon"></i>
        <div id="otherProjectGroupOvertime" class="hidden other-project-input">
          <input type="text" id="otherProjectOvertime" name="otherProject" placeholder="Specify project name">
        </div>
      </div>

      <div class="form-group">
        <label for="date"><i class="fas fa-calendar-day" style="margin-right: 8px;"></i>Overtime Date</label>
        <input type="date" id="date" name="date" required>
      </div>

      <div class="form-group">
        <label><i class="fas fa-clock" style="margin-right: 8px;"></i>Time</label>
        <div class="time-group">
          <div>
            <input type="time" id="start" name="start" required>
          </div>
          <div>
            <input type="time" id="end" name="end" required>
          </div>
        </div>
        <div class="hours-display">
          <i class="fas fa-calculator"></i> Total: <span id="hoursDisplay">0.00</span> hours
        </div>
        <input type="hidden" name="totalTime" id="totalTime">
      </div>

      <div class="form-group">
        <label for="reason"><i class="fas fa-question-circle" style="margin-right: 8px;"></i>Reason</label>
        <select id="reason" name="reason" required>
          <option value="" disabled selected>Select reason</option>
          <option value="Project Deadline">Project Deadline</option>
          <option value="Emergency Fix">Emergency Fix</option>
          <option value="Client Request">Client Request</option>
          <option value="Other">Other</option>
        </select>
        <i class="fas fa-chevron-down input-icon"></i>
      </div>

      <div class="form-group">
        <label for="notes"><i class="fas fa-sticky-note" style="margin-right: 8px;"></i>Additional Notes</label>
        <textarea id="notes" name="notes" rows="3" placeholder="Any additional information..."></textarea>
      </div>

      <input type="hidden" name="approver" value="N/A">

      <button type="submit" class="btn">
        <i class="fas fa-paper-plane"></i> Submit Request
      </button>
    </form>
  </div>

  <div class="glass-container thank-you hidden" id="thankYouMsg">
    <h3><i class="fas fa-check-circle" style="color: var(--secondary); margin-right: 10px;"></i> Submission Successful!</h3>
    <p>Your time entry has been successfully recorded.</p>
    <button class="btn" onclick="goBack()">
      <i class="fas fa-plus"></i> Create Another Entry
    </button>
  </div>

  <button class="theme-toggle" id="themeToggle"><i class="fas fa-moon"></i></button>

  <script>
    const API_URL = "https://script.google.com/macros/s/AKfycbzz-62UOauzAlY793hSLcGKkNBGFx_ruNiSULBjxe7i9a_q1TIhMozPM9CQB87-g5lK/exec";

    $(document).ready(function () {
      // Theme toggle functionality
      $('#themeToggle').click(function () {
        const current = document.documentElement.getAttribute('data-theme');
        if (current === 'dark') {
          document.documentElement.removeAttribute('data-theme');
          $(this).html('<i class="fas fa-moon"></i>');
          localStorage.setItem('theme', 'light');
        } else {
          document.documentElement.setAttribute('data-theme', 'dark');
          $(this).html('<i class="fas fa-sun"></i>');
          localStorage.setItem('theme', 'dark');
        }
      });

      // Check for saved theme preference
      if (localStorage.getItem('theme') === 'dark') {
        document.documentElement.setAttribute('data-theme', 'dark');
        $('#themeToggle').html('<i class="fas fa-sun"></i>');
      }

      // Load employee and project data
      $.get(API_URL, function (data) {
        if (data.employees && data.employees.length > 0) {
          data.employees.forEach(emp => {
            $('#employee').append(`<option value="${emp}">${emp}</option>`);
            $('#projectEmployee').append(`<option value="${emp}">${emp}</option>`);
          });
        }
        
        if (data.projects && data.projects.length > 0) {
          data.projects.forEach(proj => {
            $('#project').append(`<option value="${proj}">${proj}</option>`);
            $('#projectName').append(`<option value="${proj}">${proj}</option>`);
          });
          $('#project').append('<option value="Other Project">Other Project</option>');
          $('#projectName').append('<option value="Other Project">Other Project</option>');
        }
      }).fail(function() {
        console.error("Failed to load employee and project data");
      });

      // Show/hide "Other Project" field in overtime form
      $('#project').change(function () {
        const show = $(this).val() === 'Other Project';
        $('#otherProjectGroupOvertime').toggleClass('hidden', !show);
        if (show) {
          $('#otherProjectOvertime').focus();
        }
      });

      // Show/hide "Other Project" field in project form
      $('#projectName').change(function () {
        const show = $(this).val() === 'Other Project';
        $('#otherProjectGroup').toggleClass('hidden', !show);
        if (show) {
          $('#otherProject').focus();
        }
      });

      // Calculate hours function for overtime form
      function calculateHours() {
        const start = $('#start').val();
        const end = $('#end').val();
        
        if (start && end) {
          const startTime = new Date(`1970-01-01T${start}`);
          const endTime = new Date(`1970-01-01T${end}`);
          let diff = (endTime - startTime) / 3600000; // hours
          
          // Handle overnight overtime
          if (diff < 0) diff += 24;
          
          $('#hoursDisplay').text(diff.toFixed(2));
          $('#totalTime').val(diff.toFixed(2));
        } else {
          $('#hoursDisplay').text("0.00");
          $('#totalTime').val("");
        }
      }

      // Calculate hours when time changes in overtime form
      $('#start, #end').on('change input', calculateHours);

      // Form submission for project time tracking
      $('#projectTrackingForm').submit(function (e) {
        e.preventDefault();
        
        // Disable button and show loading state
        const submitBtn = $(this).find('button[type="submit"]');
        submitBtn.prop('disabled', true);
        submitBtn.html('<i class="fas fa-spinner fa-spin"></i> Processing...');
        
        const formData = $(this).serialize();
        
        $.ajax({
          url: API_URL,
          method: "GET",
          data: formData,
          success: function (response) {
            $('#projectForm').hide();
            $('#thankYouMsg').removeClass('hidden');
          },
          error: function (err) {
            console.error("Submission failed", err);
            alert("There was an error submitting your time entry. Please try again.");
          },
          complete: function() {
            submitBtn.prop('disabled', false);
            submitBtn.html('<i class="fas fa-save"></i> Save Time Entry');
          }
        });
      });

      // Form submission for overtime form
      $('#overtimeFormFields').submit(function (e) {
        e.preventDefault();
        
        // Disable button and show loading state
        const submitBtn = $(this).find('button[type="submit"]');
        submitBtn.prop('disabled', true);
        submitBtn.html('<i class="fas fa-spinner fa-spin"></i> Processing...');
        
        const formData = $(this).serialize();
        
        $.ajax({
          url: API_URL,
          method: "GET",
          data: formData,
          success: function (response) {
            $('#overtimeForm').hide();
            $('#thankYouMsg').removeClass('hidden');
          },
          error: function (err) {
            console.error("Submission failed", err);
            alert("There was an error submitting your request. Please try again.");
          },
          complete: function() {
            submitBtn.prop('disabled', false);
            submitBtn.html('<i class="fas fa-paper-plane"></i> Submit Request');
          }
        });
      });
    });

    // Navigation functions
    function showForm(formId) {
      document.getElementById('selectionPage').style.display = 'none';
      document.getElementById('projectForm').classList.add('hidden');
      document.getElementById('overtimeForm').classList.add('hidden');
      document.getElementById('thankYouMsg').classList.add('hidden');
      
      document.getElementById(formId).classList.remove('hidden');
    }
    
    function goBack() {
      document.getElementById('selectionPage').style.display = 'block';
      document.getElementById('projectForm').classList.add('hidden');
      document.getElementById('overtimeForm').classList.add('hidden');
      document.getElementById('thankYouMsg').classList.add('hidden');
    }
  </script>
</body>
</html>